# APIs description 
# localhost:8000/admin
to access to the admin panel (first you need to create a super user with this command : py manage.py createsuperuser) you can add,delete,update,get all databse's tables
you can also access to the token db 

# POST localhost:8000/api/register
create a new account in the db it's generate a token wwhen the user created succefully this token saved in the authtoken table in the database and can be seted in the browser's
cookies (this feature is not done yet) when user try to access some data like other APIs we need this token to be saved in his browser for a diret connection 
PS: you need to create another request before this to generate an empty user profile based on the type of the user 
Request Example : 
* POST localhost:8000/api/register
{
    "username":"username",
    "email":"email@gmail.com",
    "password":"password123?"
}
Response Example: 
{
    "user": {
        "id": 9,
        "password": "pbkdf2_sha256$390000$SJiIKzbwnhMauD8rBrFEz4$aSSitFuznrxa13XKYIR8ufv2/spQ6jrBXKaBS6lZkaw=",
        "last_login": null,
        "is_superuser": false,
        "username": "username",
        "first_name": "",
        "last_name": "",
        "email": "email@gmail.com",
        "is_staff": false,
        "is_active": true,
        "date_joined": "2023-03-04T15:48:03.730888Z",
        "groups": [],
        "user_permissions": []
    },
    "token": "07f35d14274e695f218016f1fc44aee107c4b949f6dcd18514d64e119c9f14c3"
}

# Post localhost:8000/api/login
to login a user it's open a session for a user and generate a token for a direct conecction to the account this session expired and the token deleted when the the user logout or
if the user exceed his deadline 
Request Example:
Post localhost:8000/api/login
{
    "username":"username",
    "password":"password123?"
}
Response Example:
{
    "expiry": "2023-03-05T01:55:57.273549Z",
    "token": "07251cbf532b22131067ff7b3a66320d045e6ac7ae800245ceb2318fafbeb05e"
}

# Post localhost:8000/api/logout/?Token={token}
to logout the current user ( current user = the owner of the token sendd with the request ) the token must be the login generated by the token or the user will be automaticaly
logout
Example Request: 
* Post localhost:8000/api/?Token=07251cbf532b22131067ff7b3a66320d045e6ac7ae800245ceb2318fafbeb05e
Example Response : 
204 No content 

# localhost:8000/api/pub/
* POST localhost:8000/api/pub/?Token={token}
to create a new post, post can be a question or a theme proposed by an ensignant
Request Example : 
POST localhost:8000/api/pub/?Token={token}
{
        "text": "your text here",
        "pub_type": "question",
        "type": "question",
        "user": 8
}
Response Example : 
{
    "id": 2,
    "text": "your text here",
    "pub_type": "question",
    "date": "2023-03-04",
    "type": "question",
    "user": 8
}
* GET localhost:8000/api/pub/?Token={token}
in this endpoint we can get all the pub in the data base and their information 
Request Examples : 
GET localhost:8000/api/pub/?Token={token}
Response Example : 
{
        "id": 2,
        "text": "your text here",
        "pub_type": "question",
        "date": "2023-03-04",
        "type": "question",
        "user": 8
}
* DELETE localhost:8000/api/pub/{pub_id}?Token={token}
to delete a specific Pub from db (supecified by the ID) 
* PUT localhost:8000/api/pub/{pub_id}?Token={token}
to modify an existing post by adding or replacing some field (supecified by the ID) 
Request Example : 
PUT localhost:8000/api/pub/2?Token={token}
{
        "text": "your text here",
        "pub_type": "theme",
        "type": "theme",
        "user": 8
}
Response Example :
{
    "id": 2,
    "text": "your text here",
    "pub_type": "theme",
    "date": "2023-03-04",
    "type": "theme",
    "user": 8
}

# GET localhost:8000/api/themes/
get all the themes proposed in the website and the id of the user who propose this theme 
Request Example : 
localhost:8000/api/themes/?Token=753477ecfd0dc6de6b9716db62e6910f8cff68244a96333821e45bf1766d8627

Response Example : 
{
        "id": 2,
        "text": "your text here",
        "pub_type": "theme",
        "date": "2023-03-04",
        "type": "theme",
        "user": 8
 }
 
 # GET localhost:8000/api/questions/
 get all questions proposed in the website
 Request Example : 
localhost:8000/api/questions/?Token=753477ecfd0dc6de6b9716db62e6910f8cff68244a96333821e45bf1766d8627

Response Example : 
{
        "id": 2,
        "text": "your text here",
        "pub_type": "question",
        "date": "2023-03-04",
        "type": "question",
        "user": 8
 }
 
 # localhost:8000/api/student_profile/-----localhost:8000/api/ensignant_profile/-----localhost:8000/api/comapny_profile/
 
 * GET 
   stand for get the info about the profile of a user just like CV , name , other ... for a student and grade , specialit√© ... for ensignant 
   Request Example : 
   localhost:8000/api/student_profile/?Token=753477ecfd0dc6de6b9716db62e6910f8cff68244a96333821e45bf1766d8627
   Response Example : student 
   {
        "id": 1,
        "speciality": "inforamtique",
        "interested": "blockchaine dev",
        "university_name": "usthb",
        "CV": "/CVs/IMG20221122152956.jpg",
        "study_level": "L3",
        "github_link": "https://github.com",
        "linkedin_link": "https://github.com",
        "user": 1,
        "binome": 1
    }
    Ensignant :
    {
        "id": 2,
        "speciality": "ACAD",
        "interested": "block chaine dev",
        "university_name": "usthb",
        "grade": "IDK",
        "rating": 3,
        "departement": "info",
        "user": 8
    }
# PUT localhost:8000/api/student_profile/{id}-----localhost:8000/api/ensignant_profile/{id}-----localhost:8000/api/comapny_profile/{id}
make edit for a profile of student , ensignat , company this should be after make a register a empty profile should created so the user can add his information 
same as binome  profile 
Request Example : ensignant
PUT localhost:8000/api/ensignant_profile/2?Token=753477ecfd0dc6de6b9716db62e6910f8cff68244a96333821e45bf1766d8627
{
        "speciality": "ISILE",
        "interested": "web dev ",
        "university_name": "usthb",
        "grade": "IDK",
        "rating": 4,
        "departement": "info",
        "user": 8
    }
 Response Example: 
 {
    "id": 2,
    "speciality": "ISILE",
    "interested": "web dev",
    "university_name": "usthb",
    "grade": "IDK",
    "rating": 4,
    "departement": "info",
    "user": 8
}
# api/postuler/{id}
* POST :  when a student try to "postuler" to a theme if he is a binome a notification will be send to his binome and if the binome accept this theme a notification will be send to the ensignant who post, if it's monome  a notification should be send directly to the ensignant this api gonna send this notification example : 
*request example : 
POST localhost:8000/api/postuler/3 (the id here is the id of the post) 
{
   "user": 2 (the id of student that insteract with the post)
} (here a notification should be send to the binome or ensignant)

# api/notification/{id}
* GET : return all notification for a specific user (the user speciffied in the by the id)
* request example : 
localhost:8000/notification/6
* response example : 
{
        "id": 1,
        "titel": "etudiant a demender de postuler au theme intituler theme",
        "decription": "",
        "date": "2023-04-09T00:00:00Z",
        "notification_type": "notification_binome",
        "user": 6,
        "id_pub": 2,
        "send_from": null
}

* POST : if the student  accept a theme that his binome "postuler" to a notifcation should be send to the ensignant and the urrent notification should be deleted 
or in case of an ensignant accepte "encadrer" a binome or monome a notification should be send to the students and delete all other "notification for the same post"
* request example  : (by the ay we send the id of th notification in thius case)
{
    "status":"Accepted",
    "id_pub": 2,    (the id of the theme)
    "user":6,       (id of the user that accept)
    "binome":5      (if of his binome)
} in this case the notification will be sended to the ensinant who propose this theme 
* response example : 
la demende a etait envoyer

#api/envoyer-fiche-de-pfe/
*post : here we gonna send the data to generat a "fiche de pfe" and send it to the "responsable" who will create a comission to validate this theme 
* example request : 
{
    "choix":"IV",
    "gl":"Oui",
    "archi":"Oui",
    "reseau":"Off",
    "computer_vision":"Oui",
    "ai":"Oui",
    "info_th":"Off",
    "web/app":"Oui",
    "BioInfo":"Oui",
    "nom1":"abdelkader",
    "nom1_matricule":"202031060744",
    "nom1_email":"etudiant email",
    "nom1_tel":"etudiant tel",
    "nom2":"binome",
    "nom2_matricule":"202031060744",
    "nom2_email":"binome@gmail.com",
    "nom2_tel":"num tel_binome",
    "nom1_encadreur":"encadreur1",
    "nom1_encGrade":"grade",
    "nom1_encemail":"encadreur1@gmail.com",
    "nom2_encadreur":"encadreur2",
    "nom2_encGrade":"grade",
    "nom2_encemail":"encadreur2@gmail.com",
    "titre":"titre de projet",
    "resume":"resume de texr",
    "mot_cle":"les mots cles",
    "plan":"plan 1 \n plan 2 \n plan 3",
    "bibliotheques":"je sais pas ",
    "specialite":"IV",
    "niveau":"M2",
    "organisme":"Interne",
    "raison_social":"je sais pas ",
    "service":"je sais pas "
}
* response example : fichier envoyer a le responsable pour le valider  (here the theme added to theme to validate table)

#api/validation_des_themes/{id}
* GET : return all the themes that need to be validated for a specific responsable 
*request example : localhost:8000/api/validation_des_themes/2
*response example : 
{
        "id": 11,
        "file": "/fiches/temp2.pdf",
        "specialite": "IV"
    }
   
 * POST : the responsable should create a commision to validate this theme (sended in the path 
 request example :
 {
    "ens1":3,
    "ens2":4,
    "ens3":5
}
* response example : 
{
    "id": 1,
    "ensignant1": 3,
    "ensignant2": 4,
    "ensignant3": 5,
    "theme": 11
} this is the data of the commission

#api/accpete_refuse_themes/{id}
*POST we send the status (accepted or refused theme) sended bythe commision and here we show the results in the sheet 
*example request : 
{
    "status":"Accepted",
    "specialite":"ISIL",
    "niveau":"L3"
}
* example response : 
theme added

# Get Started with this APIs 
* first you need to create a virtual envirenement : go to the folder you want to set the project open the cmd and : 
virtualenv virtualenv_name or you can use : python -m virtualenv virtualenv_name.
* cd virtualenv_name/Scripts.
* activate (write activate in the cmd after accessign to the Scripts folder)
* cd ../
* pip install django  
* django-admin startproject ser_db
* cd ser_db
* clone the content of this repo 
* pip install -r requirements.txt
* py manage.py runserver 
run the server on localhost and now you can use your endpoints
